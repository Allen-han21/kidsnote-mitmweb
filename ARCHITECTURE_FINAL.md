# Kidsnote mitmweb - ìµœì¢… ì•„í‚¤í…ì²˜

> **í•µì‹¬ ì›ì¹™**: ì•ˆì •ì„± ìš°ì„ , ìµœì†Œ ìˆ˜ì •, ìµœëŒ€ íš¨ê³¼

## ğŸ¯ ì„¤ê³„ ì² í•™

### í•µì‹¬ ê²°ì •

**âœ… ì±„íƒ**: mitmproxy í¬í¬ + íƒ­ ì¶”ê°€
**âŒ ê±°ë¶€**: allproxy íŒ¨í„´ (Node.js ì¬êµ¬í˜„, Socket.IO, ë©€í‹° íƒ­)

**ì´ìœ **:
1. **ì•ˆì •ì„±ì´ ìµœìš°ì„ ** - mitmproxyëŠ” ê²€ì¦ëœ ë„êµ¬
2. **ë‹¨ìˆœí•¨ì´ ì¢‹ë‹¤** - ë³µì¡ë„ëŠ” ë²„ê·¸ì˜ ì›ì²œ
3. **ìœ ì§€ë³´ìˆ˜ ìµœì†Œí™”** - ì›” 1ì‹œê°„ ëª©í‘œ ë‹¬ì„±
4. **ë¹ ë¥¸ ê°œë°œ** - 2ì£¼ ë‚´ ì™„ì„± ê°€ëŠ¥

---

## ğŸ—ï¸ ìµœì¢… ì•„í‚¤í…ì²˜

### ì „ì²´ ì‹œìŠ¤í…œ êµ¬ì¡°

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    iOS Simulator                             â”‚
â”‚                 Proxy: 127.0.0.1:8080                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â†“ HTTP/HTTPS
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              Python mitmproxy Core                           â”‚
â”‚                  (ë³€ê²½ ì—†ìŒ)                                 â”‚
â”‚                                                              â”‚
â”‚  - HTTP/HTTPS MITM                                          â”‚
â”‚  - SSL/TLS Handling                                          â”‚
â”‚  - WebSocket Support                                         â”‚
â”‚  - Flow Management                                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           Tornado Web Server (8081)                          â”‚
â”‚                  (ìµœì†Œ ìˆ˜ì •)                                 â”‚
â”‚                                                              â”‚
â”‚  ê¸°ì¡´ API:                                                   â”‚
â”‚  - GET  /flows                                              â”‚
â”‚  - GET  /flows/{id}                                         â”‚
â”‚  - WebSocket /updates                                       â”‚
â”‚                                                              â”‚
â”‚  ì •ì  íŒŒì¼:                                                  â”‚
â”‚  - /static/ (ë¹Œë“œëœ React ì•±)                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â†“ HTTP + WebSocket
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              React 19 Frontend (Vite)                        â”‚
â”‚                  (í•µì‹¬ ì‘ì—… ì˜ì—­)                            â”‚
â”‚                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  ê¸°ì¡´ ì»´í¬ë„ŒíŠ¸ (ìœ ì§€)                                 â”‚  â”‚
â”‚  â”‚                                                       â”‚  â”‚
â”‚  â”‚  - Header (íƒ­ ë„¤ë¹„ê²Œì´ì…˜)                            â”‚  â”‚
â”‚  â”‚  - FlowTable (ìš”ì²­ ëª©ë¡)                             â”‚  â”‚
â”‚  â”‚  - FlowView (ìƒì„¸ ë³´ê¸°)                              â”‚  â”‚
â”‚  â”‚  - EventLog (ì´ë²¤íŠ¸ ë¡œê·¸)                            â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  ì‹ ê·œ íƒ­ ì¶”ê°€ (Kidsnote ê¸°ëŠ¥)                        â”‚  â”‚
â”‚  â”‚                                                       â”‚  â”‚
â”‚  â”‚  Tab.Metrics                                          â”‚  â”‚
â”‚  â”‚  â””â”€â”€ MetricsPanel                                     â”‚  â”‚
â”‚  â”‚      â”œâ”€â”€ SummaryCards (ì´ ìš”ì²­, ì—ëŸ¬ìœ¨, í‰ê·  ì‘ë‹µ)   â”‚  â”‚
â”‚  â”‚      â”œâ”€â”€ ResponseTimeChart (ì‹œê°„ëŒ€ë³„ ì‘ë‹µì†ë„)        â”‚  â”‚
â”‚  â”‚      â”œâ”€â”€ StatusCodeChart (ìƒíƒœ ì½”ë“œ ë¶„í¬)            â”‚  â”‚
â”‚  â”‚      â””â”€â”€ DomainStatsChart (ë„ë©”ì¸ë³„ í†µê³„)            â”‚  â”‚
â”‚  â”‚                                                       â”‚  â”‚
â”‚  â”‚  Tab.Analysis (í–¥í›„ ì¶”ê°€)                            â”‚  â”‚
â”‚  â”‚  â””â”€â”€ KidsnoteAnalyzer                                 â”‚  â”‚
â”‚  â”‚      â”œâ”€â”€ APIHealthCheck (API ìƒíƒœ ì²´í¬)              â”‚  â”‚
â”‚  â”‚      â”œâ”€â”€ ErrorTracker (ì—ëŸ¬ ì¶”ì )                    â”‚  â”‚
â”‚  â”‚      â””â”€â”€ PerformanceReport (ì„±ëŠ¥ ë¦¬í¬íŠ¸)             â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                              â”‚
â”‚  Redux State (í™•ì¥)                                         â”‚
â”‚  - flows (ê¸°ì¡´)                                             â”‚
â”‚  - ui (ê¸°ì¡´)                                                â”‚
â”‚  - kidsnote/metrics (ì‹ ê·œ)                                  â”‚
â”‚  - kidsnote/analysis (ì‹ ê·œ)                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“ í”„ë¡œì íŠ¸ êµ¬ì¡°

```
kidsnote-mitmweb/
â”œâ”€â”€ docs/
â”‚   â”œâ”€â”€ ARCHITECTURE_FINAL.md    # ì´ íŒŒì¼
â”‚   â”œâ”€â”€ ROADMAP.md
â”‚   â””â”€â”€ STATUS.md
â”‚
â””â”€â”€ mitmproxy/                    # í¬í¬í•œ mitmproxy
    â”œâ”€â”€ mitmproxy/               # Python ì½”ì–´ (ë³€ê²½ ì—†ìŒ)
    â”‚
    â””â”€â”€ web/                     # í”„ë¡ íŠ¸ì—”ë“œ (í•µì‹¬ ì‘ì—…)
        â”œâ”€â”€ src/js/
        â”‚   â”œâ”€â”€ components/
        â”‚   â”‚   â”œâ”€â”€ Header.tsx              (ìˆ˜ì •: íƒ­ ì¶”ê°€)
        â”‚   â”‚   â”œâ”€â”€ MainView.tsx            (ìˆ˜ì •: íƒ­ ë¼ìš°íŒ…)
        â”‚   â”‚   â”œâ”€â”€ Header/
        â”‚   â”‚   â”‚   â””â”€â”€ MetricsMenu.tsx     (ì‹ ê·œ)
        â”‚   â”‚   â””â”€â”€ Kidsnote/               (ì‹ ê·œ ë””ë ‰í† ë¦¬)
        â”‚   â”‚       â”œâ”€â”€ MetricsPanel/
        â”‚   â”‚       â”‚   â”œâ”€â”€ index.tsx
        â”‚   â”‚       â”‚   â”œâ”€â”€ SummaryCards.tsx
        â”‚   â”‚       â”‚   â”œâ”€â”€ ResponseTimeChart.tsx
        â”‚   â”‚       â”‚   â”œâ”€â”€ StatusCodeChart.tsx
        â”‚   â”‚       â”‚   â””â”€â”€ DomainStatsChart.tsx
        â”‚   â”‚       â””â”€â”€ Analysis/           (Phase 2)
        â”‚   â”‚           â”œâ”€â”€ index.tsx
        â”‚   â”‚           â”œâ”€â”€ APIHealthCheck.tsx
        â”‚   â”‚           â””â”€â”€ ErrorTracker.tsx
        â”‚   â”‚
        â”‚   â”œâ”€â”€ ducks/
        â”‚   â”‚   â”œâ”€â”€ flows.ts                (ê¸°ì¡´)
        â”‚   â”‚   â”œâ”€â”€ ui/
        â”‚   â”‚   â”‚   â””â”€â”€ tabs.ts             (ìˆ˜ì •: Metrics íƒ­)
        â”‚   â”‚   â””â”€â”€ kidsnote/               (ì‹ ê·œ)
        â”‚   â”‚       â”œâ”€â”€ metrics.ts
        â”‚   â”‚       â””â”€â”€ analysis.ts
        â”‚   â”‚
        â”‚   â””â”€â”€ utils/                      (ì‹ ê·œ)
        â”‚       â”œâ”€â”€ metricsCalculator.ts
        â”‚       â””â”€â”€ flowAnalyzer.ts
        â”‚
        â”œâ”€â”€ package.json                    (ìˆ˜ì •: recharts ì¶”ê°€)
        â””â”€â”€ vite.config.ts
```

---

## ğŸ”‘ í•µì‹¬ ì„¤ê³„ ì›ì¹™

### 1. ìµœì†Œ ìˆ˜ì • ì›ì¹™

**ìˆ˜ì • íŒŒì¼**:
- âœï¸ `tabs.ts` - Metrics íƒ­ enum ì¶”ê°€
- âœï¸ `Header.tsx` - MetricsMenu import
- âœï¸ `MainView.tsx` - MetricsPanel ë¼ìš°íŒ…
- â• `components/Kidsnote/` - ì‹ ê·œ ì»´í¬ë„ŒíŠ¸ (ë¶„ë¦¬ëœ ë””ë ‰í† ë¦¬)
- â• `ducks/kidsnote/` - ì‹ ê·œ ìƒíƒœ ê´€ë¦¬ (ë¶„ë¦¬ëœ ë””ë ‰í† ë¦¬)

**ë³€ê²½ ì—†ìŒ**:
- âœ… Python mitmproxy core
- âœ… Tornado ì„œë²„
- âœ… ê¸°ì¡´ API
- âœ… ê¸°ì¡´ ì»´í¬ë„ŒíŠ¸
- âœ… ë¹Œë“œ ì‹œìŠ¤í…œ

### 2. í´ë¼ì´ì–¸íŠ¸ ì‚¬ì´ë“œ ì²˜ë¦¬

**ëª¨ë“  ë©”íŠ¸ë¦­ ê³„ì‚°ì€ í”„ë¡ íŠ¸ì—”ë“œì—ì„œ**:
```typescript
// ë°±ì—”ë“œ API ì¶”ê°€ ì—†ìŒ!
const flows = useAppSelector(state => state.flows.list);

// í”„ë¡ íŠ¸ì—”ë“œì—ì„œ ê³„ì‚°
const metrics = useMemo(() => ({
  totalRequests: flows.length,
  errorRate: flows.filter(f => f.response.status >= 400).length / flows.length,
  avgResponseTime: average(flows.map(f => f.response.duration)),
  slowQueries: flows.filter(f => f.response.duration > 3000).length
}), [flows]);
```

**ì´ìœ **:
- âœ… ë°±ì—”ë“œ ìˆ˜ì • ì—†ìŒ (ì•ˆì •ì„±)
- âœ… ì‹¤ì‹œê°„ ê³„ì‚° (WebSocketìœ¼ë¡œ flows ì—…ë°ì´íŠ¸ë¨)
- âœ… ê°„ë‹¨í•œ êµ¬í˜„
- âœ… ìœ ì§€ë³´ìˆ˜ ì‰¬ì›€

### 3. ì ì§„ì  í™•ì¥

**Phaseë³„ íƒ­ ì¶”ê°€**:
```typescript
// Phase 1 (2ì£¼)
Tab.Metrics

// Phase 2 (í–¥í›„)
Tab.Analysis

// Phase 3 (í–¥í›„)
Tab.Export
```

ê° íƒ­ì€ **ë…ë¦½ ì»´í¬ë„ŒíŠ¸**ë¡œ `Kidsnote/` ë””ë ‰í† ë¦¬ ë‚´ì— ê²©ë¦¬.

---

## ğŸ¨ UI ì„¤ê³„

### íƒ­ êµ¬ì¡°

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  [Capture] [FlowList] [Options] [Metrics] [Flow]       â”‚
â”‚                                     ^^^^^^              â”‚
â”‚                                  ì‹ ê·œ íƒ­               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Metrics íƒ­ í™”ë©´

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ“Š Network Metrics                                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Summary                                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”                  â”‚
â”‚  â”‚1,234 â”‚ â”‚ 2.5% â”‚ â”‚234ms â”‚ â”‚  12  â”‚                  â”‚
â”‚  â”‚Total â”‚ â”‚Error â”‚ â”‚ Avg  â”‚ â”‚Slow  â”‚                  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”˜                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Response Time Over Time                                â”‚
â”‚  [ğŸ“ˆ Line Chart]                                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Status Codes            Domains                        â”‚
â”‚  [ğŸ“Š Pie Chart]         [ğŸ“Š Bar Chart]                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”§ ê¸°ìˆ  ìŠ¤íƒ

### ë³€ê²½ ì—†ìŒ

- âœ… Python 3.12+
- âœ… mitmproxy core
- âœ… Tornado web server
- âœ… React 19
- âœ… Redux (ê¸°ì¡´ ìƒíƒœ ê´€ë¦¬)
- âœ… Vite (ë¹Œë“œ ë„êµ¬)

### ì¶”ê°€ë§Œ

```json
{
  "dependencies": {
    "recharts": "^2.13.0"  // ì°¨íŠ¸ ë¼ì´ë¸ŒëŸ¬ë¦¬
  }
}
```

---

## ğŸ“Š ë°ì´í„° íë¦„

### ë‹¨ìˆœí•œ íë¦„

```
1. iOS ì•± â†’ HTTP ìš”ì²­
   â†“
2. mitmproxy â†’ ìš”ì²­ ìº¡ì²˜
   â†“
3. Tornado â†’ WebSocketìœ¼ë¡œ flow ì´ë²¤íŠ¸ emit
   â†“
4. React â†’ Redux flows state ì—…ë°ì´íŠ¸
   â†“
5. MetricsPanel â†’ flowsì—ì„œ ë©”íŠ¸ë¦­ ê³„ì‚°
   â†“
6. ì°¨íŠ¸ ìë™ ì—…ë°ì´íŠ¸
```

**í•µì‹¬**: ê¸°ì¡´ WebSocket ì¸í”„ë¼ ê·¸ëŒ€ë¡œ ì‚¬ìš©!

---

## ğŸš€ ê°œë°œ ë¡œë“œë§µ (ìµœì¢…)

### Phase 1: MVP (2ì£¼)

**Week 1: ê¸°ë³¸ êµ¬ì¡°**
- [x] mitmproxy í¬í¬ âœ…
- [x] ê°œë°œ í™˜ê²½ ì„¤ì • âœ…
- [x] Metrics íƒ­ ì¶”ê°€ âœ…
- [x] MetricsPanel ê¸°ë³¸ UI âœ…
- [ ] recharts ì„¤ì¹˜
- [ ] SummaryCards ì‹¤ì œ ë°ì´í„° ì—°ê²°

**Week 2: ì°¨íŠ¸ êµ¬í˜„**
- [ ] ResponseTimeChart (LineChart)
- [ ] StatusCodeChart (PieChart)
- [ ] DomainStatsChart (BarChart)
- [ ] ë©”íŠ¸ë¦­ ê³„ì‚° ë¡œì§ ìµœì í™”
- [ ] ë¹Œë“œ & í…ŒìŠ¤íŠ¸

**ê²°ê³¼ë¬¼**: ì™„ì „íˆ ë™ì‘í•˜ëŠ” ë„¤íŠ¸ì›Œí¬ ë©”íŠ¸ë¦­ ëŒ€ì‹œë³´ë“œ

---

### Phase 2: ê³ ê¸‰ ë¶„ì„ (ì„ íƒ, 2ì£¼)

- [ ] Analysis íƒ­ ì¶”ê°€
- [ ] APIHealthCheck ì»´í¬ë„ŒíŠ¸
- [ ] ErrorTracker ì»´í¬ë„ŒíŠ¸
- [ ] ìŠ¬ë¡œìš° ì¿¼ë¦¬ ìë™ ê°ì§€

---

### Phase 3: ë‚´ë³´ë‚´ê¸° (ì„ íƒ, 1ì£¼)

- [ ] Export íƒ­
- [ ] HAR í¬ë§· ë‚´ë³´ë‚´ê¸°
- [ ] JSON ë‚´ë³´ë‚´ê¸°
- [ ] CSV ë‚´ë³´ë‚´ê¸°

---

## ğŸ’» êµ¬í˜„ ì˜ˆì‹œ

### 1. íƒ­ ì¶”ê°€ (ì™„ë£Œ)

```typescript
// ducks/ui/tabs.ts
export enum Tab {
  Capture,
  FlowList,
  Options,
  Flow,
  Metrics,  // âœ… ì¶”ê°€ë¨
}
```

### 2. ë©”íŠ¸ë¦­ ê³„ì‚° (ë‹¤ìŒ ë‹¨ê³„)

```typescript
// utils/metricsCalculator.ts
export function calculateMetrics(flows: Flow[]) {
  return {
    totalRequests: flows.length,
    errorRate: flows.filter(f => f.response?.status >= 400).length / flows.length * 100,
    avgResponseTime: flows.reduce((sum, f) => {
      const duration = f.response?.timestamp_end - f.request?.timestamp_start;
      return sum + duration;
    }, 0) / flows.length,
    slowQueries: flows.filter(f => {
      const duration = f.response?.timestamp_end - f.request?.timestamp_start;
      return duration > 3000;
    }).length
  };
}
```

### 3. SummaryCards ë°ì´í„° ì—°ê²°

```typescript
// components/Kidsnote/MetricsPanel/SummaryCards.tsx
import { useAppSelector } from '../../../ducks';
import { calculateMetrics } from '../../../utils/metricsCalculator';

export default function SummaryCards() {
  const flows = useAppSelector(state => state.flows.list);
  const metrics = useMemo(() => calculateMetrics(flows), [flows]);

  return (
    <div className="metrics-grid">
      <MetricCard
        label="Total Requests"
        value={metrics.totalRequests.toLocaleString()}
      />
      <MetricCard
        label="Error Rate"
        value={`${metrics.errorRate.toFixed(1)}%`}
      />
      <MetricCard
        label="Avg Response Time"
        value={`${Math.round(metrics.avgResponseTime)}ms`}
      />
      <MetricCard
        label="Slow Queries"
        value={metrics.slowQueries}
      />
    </div>
  );
}
```

### 4. ì‘ë‹µ ì‹œê°„ ì°¨íŠ¸

```typescript
// components/Kidsnote/MetricsPanel/ResponseTimeChart.tsx
import { LineChart, Line, XAxis, YAxis, CartesianGrid, Tooltip } from 'recharts';
import { useAppSelector } from '../../../ducks';

export default function ResponseTimeChart() {
  const flows = useAppSelector(state => state.flows.list);

  const data = useMemo(() => {
    // 1ë¶„ ë‹¨ìœ„ë¡œ ê·¸ë£¹í™”
    const grouped = groupByMinute(flows);
    return Object.entries(grouped).map(([time, items]) => ({
      time,
      avgResponseTime: average(items.map(f =>
        f.response?.timestamp_end - f.request?.timestamp_start
      ))
    }));
  }, [flows]);

  return (
    <div className="chart-container">
      <h3>Response Time Over Time</h3>
      <LineChart width={800} height={300} data={data}>
        <CartesianGrid strokeDasharray="3 3" />
        <XAxis dataKey="time" />
        <YAxis label={{ value: 'ms', angle: -90 }} />
        <Tooltip />
        <Line type="monotone" dataKey="avgResponseTime" stroke="#8884d8" />
      </LineChart>
    </div>
  );
}
```

---

## ğŸ¯ ì„±ê³µ ì§€í‘œ

| ì§€í‘œ | ëª©í‘œ | í˜„ì¬ |
|------|------|------|
| **ìˆ˜ì • íŒŒì¼** | < 10ê°œ | 6ê°œ âœ… |
| **ì‹ ê·œ íŒŒì¼** | < 20ê°œ | 2ê°œ |
| **Python ìˆ˜ì •** | 0ì¤„ | 0ì¤„ âœ… |
| **ë¹Œë“œ ì‹œê°„** | < 30ì´ˆ | 2.73ì´ˆ âœ… |
| **ë²ˆë“¤ í¬ê¸°** | < 1MB | TBD |
| **ê°œë°œ ê¸°ê°„** | 2ì£¼ | 3ì¼ (15%) |
| **ìœ ì§€ë³´ìˆ˜** | < 1ì‹œê°„/ì›” | TBD |

---

## âœ… ì™„ë£Œëœ ì‘ì—…

- [x] mitmproxy í¬í¬
- [x] ê°œë°œ í™˜ê²½ ì„¤ì •
- [x] Metrics íƒ­ enum ì¶”ê°€
- [x] MetricsMenu í—¤ë” ì»´í¬ë„ŒíŠ¸
- [x] MetricsPanel ê¸°ë³¸ UI
- [x] MainView ë¼ìš°íŒ…
- [x] CSS ìŠ¤íƒ€ì¼ë§
- [x] í”„ë¡œë•ì…˜ ë¹Œë“œ ì„±ê³µ

---

## ğŸ“ ë‹¤ìŒ ë‹¨ê³„

### ì¦‰ì‹œ (ì˜¤ëŠ˜)

1. **recharts ì„¤ì¹˜**
   ```bash
   cd mitmproxy/web
   npm install recharts
   ```

2. **ì‹¤ì œ ë°ì´í„° ì—°ê²°**
   ```typescript
   // SummaryCards.tsxì— calculateMetrics ì ìš©
   ```

### ì´ë²ˆ ì£¼

3. **ì²« ë²ˆì§¸ ì°¨íŠ¸**
   ```typescript
   // ResponseTimeChart êµ¬í˜„
   ```

4. **ìƒíƒœ ì½”ë“œ ì°¨íŠ¸**
   ```typescript
   // StatusCodeChart (PieChart)
   ```

5. **ë„ë©”ì¸ í†µê³„ ì°¨íŠ¸**
   ```typescript
   // DomainStatsChart (BarChart)
   ```

---

## ğŸš« í•˜ì§€ ì•Šì„ ê²ƒ

- âŒ Socket.IO ì¶”ê°€
- âŒ ë©€í‹° íƒ­ ì„¸ì…˜
- âŒ Breakpoint ì‹œìŠ¤í…œ
- âŒ Python addon ê°œë°œ
- âŒ ë°±ì—”ë“œ API ì¶”ê°€
- âŒ í”„ë¡œí† ì½œ íŒŒì„œ
- âŒ Node.js ì„œë²„
- âŒ ë…ë¦½ UI ì¬êµ¬í˜„

**ì´ìœ **: ì•ˆì •ì„± ìš°ì„ , ë³µì¡ë„ ìµœì†Œí™”, ë¹ ë¥¸ ì™„ì„±

---

## ğŸ“š ì•„í‚¤í…ì²˜ ë¬¸ì„œ ë²„ì „

| ë²„ì „ | íŒŒì¼ | ì„¤ëª… | ìƒíƒœ |
|------|------|------|------|
| v1.0 | ARCHITECTURE.md | ì´ˆê¸° ì„¤ê³„ | ì°¸ê³ ìš© |
| v2.0 | ARCHITECTURE_V2.md | allproxy ë¶„ì„ ê¸°ë°˜ | ì°¸ê³ ìš© |
| **v3.0** | **ARCHITECTURE_FINAL.md** | **ìµœì¢… ê²°ì •** | **âœ… í˜„ì¬** |

---

## ğŸ¯ ê²°ë¡ 

**ìš°ë¦¬ì˜ ì „ëµ**:
```
mitmproxy í¬í¬
    +
ìµœì†Œ ìˆ˜ì • (íƒ­ ì¶”ê°€ë§Œ)
    +
í”„ë¡ íŠ¸ì—”ë“œ ê³„ì‚° (ë°±ì—”ë“œ ë³€ê²½ ì—†ìŒ)
    +
ì ì§„ì  í™•ì¥ (Phaseë³„ íƒ­)
    =
ì•ˆì •ì ì´ê³  ë¹ ë¥¸ ê°œë°œ
```

**í•µì‹¬ ê°€ì¹˜**:
- ğŸ›¡ï¸ **ì•ˆì •ì„±**: Python mitmproxy core ê·¸ëŒ€ë¡œ
- âš¡ **ë¹ ë¥¸ ê°œë°œ**: 2ì£¼ë©´ ì¶©ë¶„
- ğŸ”§ **ì‰¬ìš´ ìœ ì§€ë³´ìˆ˜**: ì›” 1ì‹œê°„
- ğŸ“Š **ì¶©ë¶„í•œ ê¸°ëŠ¥**: ë„¤íŠ¸ì›Œí¬ ë””ë²„ê¹…ì— í•„ìš”í•œ ëª¨ë“  ë©”íŠ¸ë¦­

---

**ì‘ì„±ì¼**: 2025-12-08
**ë²„ì „**: 3.0 (Final)
**ë‹¤ìŒ ì‘ì—…**: recharts ì„¤ì¹˜ ë° ì‹¤ì œ ë°ì´í„° ì—°ê²°
